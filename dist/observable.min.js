!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Observable=e()}(this,function(){"use strict";function t(e){if(!(this instanceof t))return new t(e);if(Object.defineProperty(this,"listeners",{value:{},writable:!0}),Object.defineProperty(this,"asyncListeners",{value:{},writable:!0}),e)for(var n in e)this[n]=e[n]}function e(t){return function(e,n,r){var i=this.listeners[e];return i||(i=this.listeners[e]=[]),i.push({one:t,handler:n,ctx:r}),this}}function n(t,e,n){t?e||(this.listeners[t]=[]):this.listeners={};var r=this.listeners[t];if(!r)return this;for(var i=0;i<r.length;i++){var s=r[i];s.handler===e&&(n&&s.ctx!==n||r.splice(i--,1))}}function r(t){for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r=this.listeners[t];if(!r)return this;for(var n=0;n<r.length;n++){var i=r[n];i.one&&r.splice(n--,1),i.handler.apply(i.ctx||this,e)}}function i(t){return function(e,n,r){var i=this.asyncListeners[e];return i||(i=this.asyncListeners[e]=[]),i.push({one:t,handler:n,ctx:r}),this}}function s(t,e,n){if(!t)return this.asyncListeners={},this;if(!e)return this.asyncListeners[t]=[],this;for(var r=this.asyncListeners[t],i=0;i<r.length;i++){var s=r[i];s.handler===e&&(n&&s.ctx!==n||r.splice(i--,1))}}function o(t,e,n){function r(t,n){if(t)return void e(t);if(s>i.length-1)return void e(null,n);var o=i[s++];o.one&&i.splice(s--,1),o.handler.call(o.ctx||this,n,r)}var i=this.asyncListeners[t];if(!i)return void e(null,n);var s=0;return r(null,n),this}return t.prototype.on=e(!1),t.prototype.one=e(!0),t.prototype.off=n,t.prototype.trigger=r,t.prototype.onAsync=i(!1),t.prototype.oneAsync=i(!0),t.prototype.offAsync=s,t.prototype.triggerAsync=o,t});